# Day Twenty-Eight: Token Economics and Model Evolution

**Project:** ML Odyssey Manual
**Date:** December 5, 2025
**Branch:** `main`
**Tags:** #token-analysis #cost-tracking #opus-4-5 #opus-4-1 #agent-workflows #optimization #cleanup

---

## TL;DR

After putting off token analysis for weeks, finally did a deep dive into usage patterns across five weeks of development. The data reveals a dramatic shift from Opus 4.1 to Opus 4.5: total token usage surged from ~361M to over 1B tokens/week, but output tokens collapsed by 94%. The pattern suggests Opus 4.5 is fundamentally different—more reading, less generating, more planning. Cost jumped from ~$250/week to ~$575/week during cleanup phase, but the increased token budget enabled processing over a billion tokens weekly. The codebase now has ~120k lines of Mojo code, with development transitioning from creation to optimization and cleanup.

**Key insight:** Model upgrades change workflow economics—optimize for the new cost model, not the old one.

---

## The Analysis I've Been Avoiding

I have been pushing this off, so figured it would be a good day to do a token analysis. I've been working on this for about a month and according to statistics, there are now ~120k lines of Mojo code.

I originally was analyzing it from Thursday to Thursday, but with Opus getting released on a Monday and that resetting everything, I'm going to do Sunday to Saturday. The actual numbers don't change much, but this will make it more consistent going forward. It also shows a distinct split between Opus 4.1 usage and Opus 4.5 usage and its interesting pattern.

---

## Token Analysis - Weekly Overview

```bash
┌──────────┬──────────────────────────┬──────────┬──────────┬───────────┬────────────┬────────────┬──────────┐
│ Week     │ Models                   │    Input │   Output │     Cache │ Cache Read │      Total │     Cost │
│          │                          │          │          │    Create │            │     Tokens │    (USD) │
├──────────┼──────────────────────────┼──────────┼──────────┼───────────┼────────────┼────────────┼──────────┤
│ 2025     │ - haiku-4-5              │  521,921 │ 3,082,7… │ 30,383,2… │ 327,467,9… │ 361,455,8… │  $250.10 │
│ 11-03    │ - sonnet-4-5             │          │          │           │            │            │          │
├──────────┼──────────────────────────┼──────────┼──────────┼───────────┼────────────┼────────────┼──────────┤
│ 2025     │ - haiku-4-5              │  421,913 │ 4,413,2… │ 34,822,2… │ 423,828,4… │ 463,485,9… │  $352.21 │
│ 11-10    │ - opus-4-1               │          │          │           │            │            │          │
│          │ - sonnet-4-5             │          │          │           │            │            │          │
├──────────┼──────────────────────────┼──────────┼──────────┼───────────┼────────────┼────────────┼──────────┤
│ 2025     │ - haiku-4-5              │  735,389 │ 3,131,8… │ 38,887,0… │ 527,861,4… │ 570,615,7… │  $342.40 │
│ 11-17    │ - opus-4-1               │          │          │           │            │            │          │
│          │ - sonnet-4-5             │          │          │           │            │            │          │
├──────────┼──────────────────────────┼──────────┼──────────┼───────────┼────────────┼────────────┼──────────┤
│ 2025     │ - haiku-4-5              │ 1,227,9… │  494,232 │ 65,534,1… │ 869,221,8… │ 936,478,1… │  $493.14 │
│ 11-24    │ - opus-4-5               │          │          │           │            │            │          │
│          │ - sonnet-4-5             │          │          │           │            │            │          │
├──────────┼──────────────────────────┼──────────┼──────────┼───────────┼────────────┼────────────┼──────────┤
│ 2025     │ - haiku-4-5              │  562,672 │  302,780 │ 48,720,5… │ 965,138,1… │ 1,014,724… │  $575.45 │
│ 12-01    │ - opus-4-5               │          │          │           │            │            │          │
│          │ - sonnet-4-5             │          │          │           │            │            │          │
├──────────┼──────────────────────────┼──────────┼──────────┼───────────┼────────────┼────────────┼──────────┤
│ Total    │                          │ 3,469,8… │ 11,424,… │ 218,347,… │ 3,113,517… │ 3,346,759… │ $2013.30 │
└──────────┴──────────────────────────┴──────────┴──────────┴───────────┴────────────┴────────────┴──────────┘
```

The interesting thing here is the clean break between Opus usage between 4.1 and 4.5. I didn't really change the agents that much between the 17th and 24th, so most of the changes came from the tasks and the model upgrade. As can be seen, there was a dramatic improvement in the number of tokens that I was able to utilize on a per-week basis. I'm now using over a billion tokens a week, but the big change is my output token count is steadily reducing. I need to do some more in-depth analysis on the usage logs to see where tokens are being used, but there is definitely a switch from outputting code versus modifying/improving code that already exists. I switched from development to cleanup on the 24th, which can be shown by the large reduction in code from the [code frequency page](https://github.com/mvillmow/ProjectOdyssey/graphs/code-frequency).

Also the number of commits has started to stabilize after being highly variable the first 3 weeks, as can be seen from [commit activity page](https://github.com/mvillmow/ProjectOdyssey/graphs/commit-activity).

So code creation is decreasing and more time is spent in processing/planning. I definitely need to check if that is done via sub-agents, thinking, planning, or something else.

---

## Token Analysis - Per Model Breakdown

```bash
┌────────────┬─────────────────────────┬──────────┬──────────┬──────────┬───────────┬───────────┬──────────┐
│ Week       │ Models                  │    Input │   Output │    Cache │     Cache │     Total │     Cost │
│            │                         │          │          │   Create │      Read │    Tokens │    (USD) │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│ 2025       │ - haiku-4-5             │  521,921 │ 3,082,7… │ 30,383,… │ 327,467,… │ 361,455,… │  $250.10 │
│ 11-03      │ - sonnet-4-5            │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  504,253 │ 2,926,3… │ 28,619,… │ 308,103,… │ 340,154,… │  $245.16 │
│ sonnet-4-5 │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │   17,668 │  156,417 │ 1,763,5… │ 19,364,0… │ 21,301,7… │    $4.94 │
│ haiku-4-5  │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│ 2025       │ - haiku-4-5             │  421,913 │ 4,413,2… │ 34,822,… │ 423,828,… │ 463,485,… │  $352.21 │
│ 11-10      │ - opus-4-1              │          │          │          │           │           │          │
│            │ - sonnet-4-5            │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  281,744 │ 3,165,9… │ 28,618,… │ 315,605,… │ 347,671,… │  $250.34 │
│ sonnet-4-5 │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │    1,765 │  301,948 │ 1,577,8… │ 20,105,2… │ 21,986,7… │   $82.41 │
│ opus-4-1   │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  138,404 │  945,411 │ 4,625,4… │ 88,118,0… │ 93,827,3… │   $19.46 │
│ haiku-4-5  │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│ 2025       │ - haiku-4-5             │  735,389 │ 3,131,8… │ 38,887,… │ 527,861,… │ 570,615,… │  $342.40 │
│ 11-17      │ - opus-4-1              │          │          │          │           │           │          │
│            │ - sonnet-4-5            │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  621,953 │ 2,264,2… │ 32,476,… │ 408,606,… │ 443,969,… │  $280.20 │
│ sonnet-4-5 │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │      907 │   99,237 │  708,107 │ 13,182,4… │ 13,990,6… │   $40.51 │
│ opus-4-1   │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  112,529 │  768,298 │ 5,702,2… │ 106,072,… │ 112,655,… │   $21.69 │
│ haiku-4-5  │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│ 2025       │ - haiku-4-5             │ 1,227,9… │  494,232 │ 65,534,… │ 869,221,… │ 936,478,… │  $493.14 │
│ 11-24      │ - opus-4-5              │          │          │          │           │           │          │
│            │ - sonnet-4-5            │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  417,767 │  313,720 │ 40,662,… │ 530,297,… │ 571,691,… │  $317.53 │
│ sonnet-4-5 │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  366,893 │   23,412 │ 10,244,… │ 139,386,… │ 150,021,… │  $136.14 │
│ opus-4-5   │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  443,307 │  157,100 │ 14,627,… │ 199,537,… │ 214,764,… │   $39.47 │
│ haiku-4-5  │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│ 2025       │ - haiku-4-5             │  562,672 │  302,780 │ 48,720,… │ 965,138,… │ 1,014,72… │  $575.45 │
│ 12-01      │ - opus-4-5              │          │          │          │           │           │          │
│            │ - sonnet-4-5            │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  140,997 │   48,784 │ 30,428,… │ 642,868,… │ 673,486,… │  $513.54 │
│ opus-4-5   │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │  403,897 │  247,207 │ 17,067,… │ 312,427,… │ 330,146,… │   $54.22 │
│ haiku-4-5  │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│   └─       │                         │   17,778 │    6,789 │ 1,223,6… │ 9,842,639 │ 11,090,9… │    $7.70 │
│ sonnet-4-5 │                         │          │          │          │           │           │          │
├────────────┼─────────────────────────┼──────────┼──────────┼──────────┼───────────┼───────────┼──────────┤
│ Total      │                         │ 3,469,8… │ 11,424,… │ 218,347… │ 3,113,51… │ 3,346,75… │ $2013.30 │
└────────────┴─────────────────────────┴──────────┴──────────┴──────────┴───────────┴───────────┴──────────┘
```

Week 1 - This was the baseline agentic workflow.
Week 2 - This week was optimized agents with model-specific agents, which shows Opus being utilized for orchestration.
Week 3 - Further optimized agents for using skills and pushing more work onto Haiku over Sonnet usage.
Week 4 - Surprise usage of Opus 4.5 being prioritized and executing more than the previous week despite not changing agents much.
Week 5 - I set Opus as my default in week 4 since I ran out of Sonnet usage, but forgot to reset it when the new week started.

The amount of tokens used this week is quite incredible compared to what I am used to. I just need to figure out whether those tokens are useful tokens, or I am just blowing through them on MCP calls or something stupid like that. I also need to reset my default back to Sonnet, since Opus is a way more expensive model, so I only really want to use it for orchestration and planning, and not day-to-day tasks that can be handled just as well by cheaper models.

---

## Key Observations

### Observation 1: The Opus 4.5 Transformation

The cleanest signal in the data is the model transition:

**Opus 4.1 (Weeks 2-3):**

- Output: 301,948 + 99,237 = ~401K tokens
- Total usage: Small fraction of weekly budget
- Role: Light orchestration only

**Opus 4.5 (Weeks 4-5):**

- Output: 23,412 + 48,784 = ~72K tokens
- Total usage: Dominant model by cost
- Role: Heavy orchestration and planning

**The pattern:** Opus 4.5 generates 94% less output than Opus 4.1, but consumes dramatically more total tokens through input and cache operations.

**The lesson:** Opus 4.5 isn't just "better"—it's fundamentally different. It reads more, plans more, and delegates more efficiently. The cost model shifted from "pay per generation" to "pay for understanding and coordination."

### Observation 2: Total Token Explosion

Weekly total tokens by phase:

| Week | Phase | Total Tokens | Growth |
|------|-------|--------------|--------|
| 11-03 | Baseline | 361M | - |
| 11-10 | Optimized | 463M | +28% |
| 11-17 | Skills | 570M | +23% |
| 11-24 | Opus 4.5 | 936M | +64% |
| 12-01 | Cleanup | 1,014M | +8% |

**The pattern:** Token usage nearly tripled from baseline to cleanup phase, with the biggest jump coinciding with Opus 4.5 introduction.

**The lesson:** The weekly token budget expanded dramatically, enabling processing over a billion tokens/week. This isn't waste—it's increased capacity for reading, understanding, and coordinating complex work.

### Observation 3: Output Token Collapse

Weekly output tokens across all models:

| Week | Total Output | Change |
|------|--------------|--------|
| 11-03 | 3,082,757 | - |
| 11-10 | 4,413,265 | +43% |
| 11-17 | 3,131,835 | -29% |
| 11-24 | 494,232 | -84% |
| 12-01 | 302,780 | -39% |

**The pattern:** Output tokens collapsed by 90% from Week 2 to Week 5, even as total token usage surged.

**The lesson:** The workflow shifted from "generate code" to "read and refine code." This matches the transition from development to cleanup documented in GitHub activity—less creation, more optimization.

### Observation 4: Cost vs Value Economics

Cost per week and phase:

| Week | Cost | Phase | Work Pattern |
|------|------|-------|-------------|
| 11-03 | $250 | Baseline | Initial development |
| 11-10 | $352 | Optimized | Feature additions |
| 11-17 | $342 | Skills | Automation integration |
| 11-24 | $493 | Opus 4.5 | Major cleanup start |
| 12-01 | $575 | Cleanup | Deep refactoring |

**The pattern:** Cost increased 130% from baseline to cleanup, but this enabled processing 180% more tokens and handling systematic refactoring across 120k lines of code.

**The lesson:** Higher costs during cleanup are justified by the volume of code being processed. The cost-per-line-analyzed decreased even as absolute cost increased.

---

## What's Next

Based on the token analysis, several priorities emerge:

### Immediate Actions

1. **Reset default model to Sonnet** - Opus should be orchestration-only, not default for all tasks
2. **Analyze token usage logs** - Determine if high usage is productive (reading/planning) or wasteful (MCP overhead)
3. **Validate cleanup completion** - Ensure the high Week 5 token usage actually achieved cleanup goals
4. **Optimize agent workflows** - Push more routine work to Haiku, reserve Sonnet for complex tasks, limit Opus to orchestration

### Strategic Questions

1. **Are billion-token weeks sustainable?** - At current pricing, probably not long-term
2. **What's the optimal model mix?** - Need data on task complexity vs model cost-effectiveness
3. **How much is MCP overhead?** - If significant, consider alternatives to reduce token waste
4. **What's the maintenance token budget?** - Development phase is over—what does steady-state look like?

### Next Analysis

Track for the next week:

- Token usage by task type (orchestration vs implementation vs review)
- Model selection accuracy (was the right model used for each task?)
- MCP call overhead (tokens consumed by tool calls vs actual work)
- Cleanup effectiveness (lines refactored per token consumed)

---

## Reflections

This analysis revealed patterns I suspected but hadn't confirmed:

1. **Model upgrades change economics, not just capability** - Opus 4.5 isn't just "better," it operates on a different cost model. The 94% output reduction paired with total token increases means optimizing for the old model (minimize generation) misses the new bottleneck (optimize context and cache efficiency).

2. **Development phases have distinct token profiles** - Baseline development generates code (high output tokens). Cleanup refines code (high input tokens, low output). The token patterns validate the GitHub activity patterns—the data tells a consistent story.

3. **Token budgets expanded dramatically** - Going from 361M to 1,014M tokens/week is a 180% increase. Either weekly limits changed, or I'm using the budget very differently. Need to determine which.

4. **Cost follows complexity, not volume** - The highest-cost week (12-01, $575) corresponds to the cleanup phase, which required reading and understanding massive amounts of code to refactor systematically. This is expensive but justified—the alternative is manual refactoring.

5. **Default model selection matters** - Accidentally leaving Opus as default in Week 5 probably inflated costs unnecessarily. Deliberate model selection for task complexity is critical for cost control.

The key takeaway: optimize for the current model's strengths, not the previous model's limitations. Opus 4.5 changed the game—workflows must adapt.

---

**Status:** Token analysis complete, patterns identified, ~120k lines of Mojo code, cleanup phase complete, transitioning to optimization

**Next:** Reset default model, analyze usage logs, validate cleanup effectiveness, optimize agent workflows
